---

# We MUST update cache... Ansible auto install python-apt
- name: Update APT 
  apt: update_cache=yes

- name: Debian repository
  apt_repository: repo='deb http://{{ apt_default_host }}/debian {{ ansible_distribution_release }} main contrib non-free' state=present  

- name: Debian update repository
  apt_repository: repo='deb http://{{ apt_default_host }}/debian {{ ansible_distribution_release }}-updates main contrib non-free' state=present  

# BUG: syntax is different between debian releases (check: http://backports.debian.org/Instructions/)
- name: Backports repository
  apt_repository: repo='deb http://{{ debian_backport_host }}/debian {{ ansible_distribution_release }}-backports main' state=present  

- name: Delete default repository (sources.list) 
  command: rm /etc/apt/sources.list
  ignore_errors: yes

- name: Update APT 
  apt: update_cache=yes upgrade=yes

- name: few packages
  apt: pkg={{ item }} state=latest
  with_items:
    - bmon
    - curl
    - htop
    - hping3
    - gnupg
    - iotop
    - lynx
    - netcat
    - nmap 
    - openntpd
    - pwgen
    - screen
    - rsync
    - tcpdump
    - vim
    
