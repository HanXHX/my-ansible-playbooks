---
- name: Common ansible playbook
  hosts: all
  pre_tasks:
    - name: Check host is Debian Wheezy 
      fail: msg='Not a Debian Wheezy!'
      when: ansible_distribution != 'Debian' or ansible_distribution_release != "wheezy"
  roles:
    - minimal
    - { role: dotdeb, when: use_dotdeb }
    - { role: mysql, when: use_database == 'mariadb' or use_database == 'mysql' }
    - { role: php, when: use_php }
    - { role: redis, when: use_redis }
